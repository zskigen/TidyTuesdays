


```{r}
library(tidytuesdayR)
library(tidyverse)
tuesdata <- tidytuesdayR::tt_load('2025-09-16')

all_recipes <- tuesdata$all_recipes
cuisines <- 
readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/main/data/2025/2025-09-16/cuisines.csv') |> 
  mutate(name_link = paste0('<a href = "',url,'">',name,'</a>')) |>
  rename(cuisine = country)

```

## Interactive table

```{r}
cuisines |> 
  select(name_link, cuisine, date_published, calories, fat, carbs,
         protein, avg_rating, total_ratings, reviews,
         prep_time, cook_time, total_time, servings) |> 
  DT::datatable(escape = FALSE,
                class = 'display',
                extensions = 'Buttons',
                rownames = FALSE,
                options = list(
                  dom = 'Bfrtip',
                  buttons = list(
                    list(extend = 'colvis', 
                         text = 'select nutritional info',
                         columns = c(3:7)),
                    list(extend = 'colvis', 
                         text = 'select rating info',
                         columns = c(8:10)),                    
                    list(extend = 'colvis', 
                         text = 'select cook info',
                         columns = c(11:13))  
                    ),
                  columnDefs = list(list(visible = FALSE,
                                         targets = c(3:13)))
                ))

```


#Function to make stars: 
```{r}

make_stars <- function(rating) {
  full <- floor(rating)
  half <- ifelse(rating - full >= 0.5, 1, 0)
  empty <- 5 - full - half
  
  paste0(
    strrep('<span style="color: gold;">&#9733;</span>', full),   # ★
    strrep('<span style="color: gold;">&#189;</span>', half),    # optional placeholder for half
    strrep('<span style="color: lightgray;">&#9733;</span>', empty) # ☆ in grey
  )
}
```

```{r}
```{css, echo=FALSE}
.star {
  font-size: 16px;
}
.star.full {
  color: gold;
}
.star.empty {
  color: lightgray;
}
.star.half {
  background: linear-gradient(90deg, gold 50%, lightgray 50%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}
```


```{r}
cuisine_table <- cuisine_table |> mutate(stars = sapply(avg_rating, make_stars))
```


```{r}
cuisine_table |>
  select(name_link, cuisine, stars) |>
  datatable(escape = FALSE, rownames = FALSE)
```

```{r}
library(fontawesome)
fontawesome::fa_html_dependency()
```

```{r}
cuisines <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/main/data/2025/2025-09-16/cuisines.csv') |> 
  mutate(name_link = paste0('<a href = "',url,'">',name,'</a>')) |> 
  rename(cuisine = country) |> 
  mutate(full = floor(avg_rating),
         half = ifelse((avg_rating - full) >= 0.5, 1, 0),
         empty = 5 - full - half) |> 
  mutate(stars = paste0( 
    strrep('<span style="color: gold;">&#9733;</span>', full),   # ★
    strrep('<span style="color: gold;"><i class="fa-solid fa-star-half"></i></span>', half),    # optional placeholder for half
    strrep('<span style="color: lightgray;">&#9733;</span>', empty) # ☆ in grey
  
))

```


```{r}
cuisines <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/main/data/2025/2025-09-16/cuisines.csv') |> 
  mutate(name_link = paste0('<a href = "',url,'">',name,'</a>')) |> 
  rename(cuisine = country) |> 
  mutate(full = floor(avg_rating),
         half = ifelse((avg_rating - full) >= 0.5, 1, 0),
         empty = 5 - full - half) |> 
  mutate(stars = ifelse(is.na(avg_rating), NA,
                              paste0( 
    strrep('<span style="color: gold;">&#9733;</span>', full),   # ★
    strrep('<span style="color: gold;"><i class="fa-solid fa-star-half"></i></span>', half),    # optional placeholder for half
    strrep('<span style="color: lightgray;">&#9733;</span>', empty) # ☆ in grey
  
)))

```

```{r}
df <- cuisines |> 
  mutate(name_link = paste0('<a href = "',url,'" target="_blank">',name,'</a>'), 
         full = floor(avg_rating),
         half = case_when(avg_rating - full <= 0.25 ~ 0,
                          avg_rating - full >= 0.75 ~ 0,
                          TRUE ~ 1),
         full = ifelse(avg_rating - full >= 0.75, full + 1, full),
         empty = 5 - full - half) |>
  
  mutate(stars = ifelse(is.na(avg_rating), NA, paste0( 
    strrep('<span style="color: gold;">&#9733;</span>', full),   # ★
    strrep('<span style="color: gold;"><i class="fa-solid fa-star-half"></i></span>', half),
    strrep('<span style="color: lightgray;">&#9733;</span>', empty) # ☆ in grey
    )))


```


```{r}
cuisines <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/main/data/2025/2025-09-16/cuisines.csv') |> 
  mutate(name_link = paste0('<a href = "',url,'">',name,'</a>')) |> 
  rename(cuisine = country) |> 
  mutate(full = floor(avg_rating + 0.25),
         half = ifelse((avg_rating +.25 - full) >= 0.5, 1, 0),
         empty = 5 - full - half) |> 
  mutate(stars = ifelse(is.na(avg_rating), NA,
                              paste0( 
    strrep('<span style="color: gold;">&#9733;</span>', full),   # ★
    strrep('<span style="color: gold;"><i class="fa-solid fa-star-half"></i></span>', half),    # optional placeholder for half
    strrep('<span style="color: lightgray;">&#9733;</span>', empty) # ☆ in grey
  
)))


```


